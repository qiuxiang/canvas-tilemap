"use strict";(()=>{function Pn(n,t,e){return Math.max(t,Math.min(n,e))}var w={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function me(n,t,e){return t===0||Math.abs(t)===1/0?Math.pow(n,e*5):n*t*e/(t+e*n)}function pe(n,t,e,s=.15){return s===0?Pn(n,t,e):n<t?-me(t-n,e-t,s)+t:n>e?+me(n-e,e-t,s)+e:n}function de(n,[t,e],[s,r]){let[[o,i],[a,c]]=n;return[pe(t,o,i,s),pe(e,a,c,r)]}function An(n,t){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Cn(n){var t=An(n,"string");return typeof t=="symbol"?t:String(t)}function S(n,t,e){return t=Cn(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ge(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,s)}return e}function T(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ge(Object(e),!0).forEach(function(s){S(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ge(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}var Ee={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ye(n){return n?n[0].toUpperCase()+n.slice(1):""}var Ln=["enter","leave"];function Rn(n=!1,t){return n&&!Ln.includes(t)}function Me(n,t="",e=!1){let s=Ee[n],r=s&&s[t]||t;return"on"+ye(n)+ye(r)+(Rn(e,r)?"Capture":"")}var jn=["gotpointercapture","lostpointercapture"];function Ie(n){let t=n.substring(2).toLowerCase(),e=!!~t.indexOf("passive");e&&(t=t.replace("passive",""));let s=jn.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(s);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:e}}function ke(n,t=""){let e=Ee[n],s=e&&e[t]||t;return n+s}function X(n){return"touches"in n}function De(n){return X(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Nn(n){return Array.from(n.touches).filter(t=>{var e,s;return t.target===n.currentTarget||((e=n.currentTarget)===null||e===void 0||(s=e.contains)===null||s===void 0?void 0:s.call(e,t.target))})}function Bn(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function Pe(n){return X(n)?Bn(n)[0]:n}function Nt(n,t){let e=t.clientX-n.clientX,s=t.clientY-n.clientY,r=(t.clientX+n.clientX)/2,o=(t.clientY+n.clientY)/2,i=Math.hypot(e,s);return{angle:-(Math.atan2(e,s)*180)/Math.PI,distance:i,origin:[r,o]}}function Ae(n){return Nn(n).map(t=>t.identifier)}function ve(n,t){let[e,s]=Array.from(n.touches).filter(r=>t.includes(r.identifier));return Nt(e,s)}function jt(n){let t=Pe(n);return X(n)?t.identifier:t.pointerId}function U(n){let t=Pe(n);return[t.clientX,t.clientY]}var be=40,xe=800;function Ce(n){let{deltaX:t,deltaY:e,deltaMode:s}=n;return s===1?(t*=be,e*=be):s===2&&(t*=xe,e*=xe),[t,e]}function Un(n){var t,e;let{scrollX:s,scrollY:r,scrollLeft:o,scrollTop:i}=n.currentTarget;return[(t=s??o)!==null&&t!==void 0?t:0,(e=r??i)!==null&&e!==void 0?e:0]}function zn(n){let t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){let{shiftKey:e,altKey:s,metaKey:r,ctrlKey:o}=n;Object.assign(t,{shiftKey:e,altKey:s,metaKey:r,ctrlKey:o})}return t}function ut(n,...t){return typeof n=="function"?n(...t):n}function Vn(){}function Le(...n){return n.length===0?Vn:n.length===1?n[0]:function(){let t;for(let e of n)t=e.apply(this,arguments)||t;return t}}function _e(n,t){return Object.assign({},t,n||{})}var Fn=32,ft=class{constructor(t,e,s){this.ctrl=t,this.args=e,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:t,shared:e,ingKey:s,args:r}=this;e[s]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=r,t.axis=void 0,t.memo=void 0,t.elapsedTime=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){let e=this.state,s=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=s.from?ut(s.from,e):e.offset,e.offset=e.lastOffset),e.startTime=e.timeStamp=t.timeStamp}computeValues(t){let e=this.state;e._values=t,e.values=this.config.transform(t)}computeInitial(){let t=this.state;t._initial=t._values,t.initial=t.values}compute(t){let{state:e,config:s,shared:r}=this;e.args=this.args;let o=0;if(t&&(e.event=t,s.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,zn(t)),r.down=r.pressed=r.buttons%2===1||r.touches>0,o=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){let O=e._delta.map(Math.abs);w.addTo(e._distance,O)}this.axisIntent&&this.axisIntent(t);let[i,a]=e._movement,[c,l]=s.threshold,{_step:u,values:d}=e;if(s.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(i)>=c&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=l&&d[1])):(u[0]===!1&&(u[0]=Math.abs(i)>=c&&Math.sign(i)*c),u[1]===!1&&(u[1]=Math.abs(a)>=l&&Math.sign(a)*l)),e.intentional=u[0]!==!1||u[1]!==!1,!e.intentional)return;let v=[0,0];if(s.hasCustomTransform){let[O,I]=d;v[0]=u[0]!==!1?O-u[0]:0,v[1]=u[1]!==!1?I-u[1]:0}else v[0]=u[0]!==!1?i-u[0]:0,v[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(v);let y=e.offset,f=e._active&&!e._blocked||e.active;f&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=r[this.ingKey]=e._active,t&&(e.first&&("bounds"in s&&(e._bounds=ut(s.bounds,e)),this.setup&&this.setup()),e.movement=v,this.computeOffset()));let[h,g]=e.offset,[[b,m],[p,x]]=e._bounds;e.overflow=[h<b?-1:h>m?1:0,g<p?-1:g>x?1:0],e._movementBound[0]=e.overflow[0]?e._movementBound[0]===!1?e._movement[0]:e._movementBound[0]:!1,e._movementBound[1]=e.overflow[1]?e._movementBound[1]===!1?e._movement[1]:e._movementBound[1]:!1;let _=e._active?s.rubberband||[0,0]:[0,0];if(e.offset=de(e._bounds,e.offset,_),e.delta=w.sub(e.offset,y),this.computeMovement(),f&&(!e.last||o>Fn)){e.delta=w.sub(e.offset,y);let O=e.delta.map(Math.abs);w.addTo(e.distance,O),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&o>0&&(e.velocity=[O[0]/o,O[1]/o])}}emit(){let t=this.state,e=this.shared,s=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!s.triggerAllEvents)return;let r=this.handler(T(T(T({},e),t),{},{[this.aliasKey]:t.values}));r!==void 0&&(t.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function Hn([n,t],e){let s=Math.abs(n),r=Math.abs(t);if(s>r&&s>e)return"x";if(r>s&&r>e)return"y"}var N=class extends ft{constructor(...t){super(...t),S(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=w.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=w.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){let e=this.state,s=this.config;if(!e.axis&&t){let r=typeof s.axisThreshold=="object"?s.axisThreshold[De(t)]:s.axisThreshold;e.axis=Hn(e._movement,r)}e._blocked=(s.lockDirection||!!s.axis)&&!e.axis||!!s.axis&&s.axis!==e.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}},Gn=n=>n,we=.15,Re={enabled(n=!0){return n},eventOptions(n,t,e){return T(T({},e.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[we,we];case!1:return[0,0];default:return w.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return w.toVector(n)},transform(n,t,e){let s=n||e.shared.transform;return this.hasCustomTransform=!!s,s||Gn},threshold(n){return w.toVector(n,0)}},Kn=0,B=T(T({},Re),{},{axis(n,t,{axis:e}){if(this.lockDirection=e==="lock",!this.lockDirection)return e},axisThreshold(n=Kn){return n},bounds(n={}){if(typeof n=="function")return o=>B.bounds(n(o));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;let{left:t=-1/0,right:e=1/0,top:s=-1/0,bottom:r=1/0}=n;return[[t,e],[s,r]]}}),Te={ArrowRight:(n,t=1)=>[n*t,0],ArrowLeft:(n,t=1)=>[-1*n*t,0],ArrowUp:(n,t=1)=>[0,-1*n*t],ArrowDown:(n,t=1)=>[0,n*t]},Bt=class extends N{constructor(...t){super(...t),S(this,"ingKey","dragging")}reset(){super.reset();let t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){let t=this.state;if(t._bounds instanceof HTMLElement){let e=t._bounds.getBoundingClientRect(),s=t.currentTarget.getBoundingClientRect(),r={left:e.left-s.left+t.offset[0],right:e.right-s.right+t.offset[0],top:e.top-s.top+t.offset[1],bottom:e.bottom-s.bottom+t.offset[1]};t._bounds=B.bounds(r)}}cancel(){let t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){let e=this.config,s=this.state;if(t.buttons!=null&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(t.buttons):e.pointerButtons!==-1&&e.pointerButtons!==t.buttons))return;let r=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(r&&r.size>1&&s._pointerActive)&&(this.start(t),this.setupPointer(t),s._pointerId=jt(t),s._pointerActive=!0,this.computeValues(U(t)),this.computeInitial(),e.preventScrollAxis&&De(t)!=="mouse"?(s._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){let e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}pointerMove(t){let e=this.state,s=this.config;if(!e._pointerActive||e.type===t.type&&t.timeStamp===e.timeStamp)return;let r=jt(t);if(e._pointerId!==void 0&&r!==e._pointerId)return;let o=U(t);if(document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=w.sub(o,e._values),this.computeValues(o)),w.addTo(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional){this.timeoutStore.remove("dragDelay"),e.active=!1,this.startPointerDrag(t);return}if(s.preventScrollAxis&&!e._preventScroll)if(e.axis)if(e.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){e._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}let e=this.state,s=this.config;if(!e._active||!e._pointerActive)return;let r=jt(t);if(e._pointerId!==void 0&&r!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);let[o,i]=e._distance;if(e.tap=o<=s.tapsThreshold&&i<=s.tapsThreshold,e.tap&&s.filterTaps)e._force=!0;else{let[a,c]=e.direction,[l,u]=e.velocity,[d,v]=e.movement,[y,f]=s.swipe.velocity,[h,g]=s.swipe.distance,b=s.swipe.duration;e.elapsedTime<b&&(Math.abs(l)>y&&Math.abs(d)>h&&(e.swipe[0]=a),Math.abs(u)>f&&Math.abs(v)>g&&(e.swipe[1]=c))}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){let e=this.config,s=e.device;if(!1)try{}catch(r){}e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Yn(t);let e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){let e=Te[t.key];if(e){let s=this.state,r=t.shiftKey?10:t.altKey?.1:1;this.start(t),s._delta=e(this.config.keyboardDisplacement,r),s._keyboardActive=!0,w.addTo(s._movement,s._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Te&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){let e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}};function Yn(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}var q=typeof window<"u"&&window.document&&window.document.createElement;function $n(){return q&&"ontouchstart"in window}function Oe(){return $n()||q&&window.navigator.maxTouchPoints>1}function Wn(){return q&&"onpointerdown"in window}function Zn(){return q&&"exitPointerLock"in window.document}function Xn(){try{return"constructor"in GestureEvent}catch{return!1}}var E={isBrowser:q,gesture:Xn(),touch:Oe(),touchscreen:Oe(),pointer:Wn(),pointerLock:Zn()},qn=250,Jn=180,Qn=.5,ts=50,es=250,ns=10,Se={mouse:0,touch:0,pen:8},ss=T(T({},B),{},{device(n,t,{pointer:{touch:e=!1,lock:s=!1,mouse:r=!1}={}}){return this.pointerLock=s&&E.pointerLock,E.touch&&e?"touch":this.pointerLock?"mouse":E.pointer&&!r?"pointer":E.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:e}){if(this.preventScrollDelay=typeof e=="number"?e:e||e===void 0&&n?qn:void 0,!(!E.touchscreen||e===!1))return n||(e!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:e=!0,buttons:s=1,keys:r=!0}={}}){return this.pointerButtons=s,this.keys=r,!this.pointerLock&&this.device==="pointer"&&e},threshold(n,t,{filterTaps:e=!1,tapsThreshold:s=3,axis:r=void 0}){let o=w.toVector(n,e?s:r?1:0);return this.filterTaps=e,this.tapsThreshold=s,o},swipe({velocity:n=Qn,distance:t=ts,duration:e=es}={}){return{velocity:this.transform(w.toVector(n)),distance:this.transform(w.toVector(t)),duration:e}},delay(n=0){switch(n){case!0:return Jn;case!1:return 0;default:return n}},axisThreshold(n){return n?T(T({},Se),n):Se},keyboardDisplacement(n=ns){return n}});function je(n){let[t,e]=n.overflow,[s,r]=n._delta,[o,i]=n._direction;(t<0&&s>0&&o<0||t>0&&s<0&&o>0)&&(n._movement[0]=n._movementBound[0]),(e<0&&r>0&&i<0||e>0&&r<0&&i>0)&&(n._movement[1]=n._movementBound[1])}var rs=30,os=100,Ut=class extends ft{constructor(...t){super(...t),S(this,"ingKey","pinching"),S(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){let{type:t,movement:e,lastOffset:s}=this.state;t==="wheel"?this.state.offset=w.add(e,s):this.state.offset=[(1+e[0])*s[0],e[1]+s[1]]}computeMovement(){let{offset:t,lastOffset:e}=this.state;this.state.movement=[t[0]/e[0],t[1]-e[1]]}axisIntent(){let t=this.state,[e,s]=t._movement;if(!t.axis){let r=Math.abs(e)*rs-Math.abs(s);r<0?t.axis="angle":r>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){let t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);let e=this.state,s=this.ctrl.touchIds;if(e._active&&e._touchIds.every(o=>s.has(o))||s.size<2)return;this.start(t),e._touchIds=Array.from(s).slice(0,2);let r=ve(t,e._touchIds);this.pinchStart(t,r)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);let e=this.state,s=e._pointerEvents,r=this.ctrl.pointerIds;if(e._active&&Array.from(s.keys()).every(i=>r.has(i))||(s.size<2&&s.set(t.pointerId,t),e._pointerEvents.size<2))return;this.start(t);let o=Nt(...Array.from(s.values()));this.pinchStart(t,o)}pinchStart(t,e){let s=this.state;s.origin=e.origin,this.computeValues([e.distance,e.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;let e=ve(t,this.state._touchIds);this.pinchMove(t,e)}pointerMove(t){let e=this.state._pointerEvents;if(e.has(t.pointerId)&&e.set(t.pointerId,t),!this.state._active)return;let s=Nt(...Array.from(e.values()));this.pinchMove(t,s)}pinchMove(t,e){let s=this.state,r=s._values[1],o=e.angle-r,i=0;Math.abs(o)>270&&(i+=Math.sign(o)),this.computeValues([e.distance,e.angle-360*i]),s.origin=e.origin,s.turns=i,s._movement=[s._values[0]/s._initial[0]-1,s._values[1]-s._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){let e=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}e._pointerEvents.has(t.pointerId)&&e._pointerEvents.delete(t.pointerId),e._active&&e._pointerEvents.size<2&&(e._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();let e=this.state;e._active||(this.start(t),this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;let e=this.state;this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY];let s=e._movement;e._movement=[t.scale-1,t.rotation],e._delta=w.sub(e._movement,s),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){let e=this.config.modifierKey;e&&!t[e]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();let s=this.state;s._delta=[-Ce(t)[1]/os*s.offset[0],0],w.addTo(s._movement,s._delta),je(s),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){let e=this.config.device;e&&(t(e,"start",this[e+"Start"].bind(this)),t(e,"change",this[e+"Move"].bind(this)),t(e,"end",this[e+"End"].bind(this)),t(e,"cancel",this[e+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}},is=T(T({},Re),{},{device(n,t,{shared:e,pointer:{touch:s=!1}={}}){if(e.target&&!E.touch&&E.gesture)return"gesture";if(E.touch&&s)return"touch";if(E.touchscreen){if(E.pointer)return"pointer";if(E.touch)return"touch"}},bounds(n,t,{scaleBounds:e={},angleBounds:s={}}){let r=i=>{let a=_e(ut(e,i),{min:-1/0,max:1/0});return[a.min,a.max]},o=i=>{let a=_e(ut(s,i),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof e!="function"&&typeof s!="function"?[r(),o()]:i=>[r(i),o(i)]},threshold(n,t,e){return this.lockDirection=e.axis==="lock",w.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}}),zt=class extends N{constructor(...t){super(...t),S(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(U(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;let e=U(t),s=this.state;s._delta=w.sub(e,s._values),w.addTo(s._movement,s._delta),this.computeValues(e),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}},as=T(T({},B),{},{mouseOnly:(n=!0)=>n}),Vt=class extends N{constructor(...t){super(...t),S(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();let e=this.state,s=Un(t);e._delta=w.sub(s,e._values),w.addTo(e._movement,e._delta),this.computeValues(s),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}},cs=B,Ft=class extends N{constructor(...t){super(...t),S(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){let e=this.state;e._delta=Ce(t),w.addTo(e._movement,e._delta),je(e),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}},ls=B,Ht=class extends N{constructor(...t){super(...t),S(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(U(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;let e=this.state;if(!e._active)return;e._active=!1;let s=U(t);e._movement=e._delta=w.sub(s,e._values),this.computeValues(s),this.compute(t),e.delta=e.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}},us=T(T({},B),{},{mouseOnly:(n=!0)=>n}),J=new Map,Q=new Map;function Gt(n){J.set(n.key,n.engine),Q.set(n.key,n.resolver)}var Kt={key:"drag",engine:Bt,resolver:ss},Yt={key:"hover",engine:Ht,resolver:us},$t={key:"move",engine:zt,resolver:as},Wt={key:"pinch",engine:Ut,resolver:is},Zt={key:"scroll",engine:Vt,resolver:cs},Xt={key:"wheel",engine:Ft,resolver:ls};function fs(n,t){if(n==null)return{};var e={},s=Object.keys(n),r,o;for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&(e[r]=n[r]);return e}function hs(n,t){if(n==null)return{};var e=fs(n,t),s,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)s=o[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(e[s]=n[s])}return e}var ms={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=E.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},ps=["target","eventOptions","window","enabled","transform"];function ht(n={},t){let e={};for(let[s,r]of Object.entries(t))switch(typeof r){case"function":e[s]=r.call(e,n[s],s,n);break;case"object":e[s]=ht(n[s],r);break;case"boolean":r&&(e[s]=n[s]);break}return e}function ds(n,t,e={}){let s=n,{target:r,eventOptions:o,window:i,enabled:a,transform:c}=s,l=hs(s,ps);if(e.shared=ht({target:r,eventOptions:o,window:i,enabled:a,transform:c},ms),t){let u=Q.get(t);e[t]=ht(T({shared:e.shared},l),u)}else for(let u in l){let d=Q.get(u);d&&(e[u]=ht(T({shared:e.shared},l[u]),d))}return e}var mt=class{constructor(t,e){S(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=e}add(t,e,s,r,o){let i=this._listeners,a=ke(e,s),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=T(T({},c),o);t.addEventListener(a,r,l);let u=()=>{t.removeEventListener(a,r,l),i.delete(u)};return i.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}},qt=class{constructor(){S(this,"_timeouts",new Map)}add(t,e,s=140,...r){this.remove(t),this._timeouts.set(t,window.setTimeout(e,s,...r))}remove(t){let e=this._timeouts.get(t);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}},pt=class{constructor(t){S(this,"gestures",new Set),S(this,"_targetEventStore",new mt(this)),S(this,"gestureEventStores",{}),S(this,"gestureTimeoutStores",{}),S(this,"handlers",{}),S(this,"config",{}),S(this,"pointerIds",new Set),S(this,"touchIds",new Set),S(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),gs(this,t)}setEventIds(t){if(X(t))return this.touchIds=new Set(Ae(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,e){this.handlers=t,this.nativeHandlers=e}applyConfig(t,e){this.config=ds(t,e,this.config)}clean(){this._targetEventStore.clean();for(let t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){let e=this.config.shared,s={},r;if(!(e.target&&(r=e.target(),!r))){if(e.enabled){for(let i of this.gestures){let a=this.config[i],c=Ne(s,a.eventOptions,!!r);if(a.enabled){let l=J.get(i);new l(this,t,i).bind(c)}}let o=Ne(s,e.eventOptions,!!r);for(let i in this.nativeHandlers)o(i,"",a=>this.nativeHandlers[i](T(T({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(let o in s)s[o]=Le(...s[o]);if(!r)return s;for(let o in s){let{device:i,capture:a,passive:c}=Ie(o);this._targetEventStore.add(r,i,"",s[o],{capture:a,passive:c})}}}};function z(n,t){n.gestures.add(t),n.gestureEventStores[t]=new mt(n,t),n.gestureTimeoutStores[t]=new qt}function gs(n,t){t.drag&&z(n,"drag"),t.wheel&&z(n,"wheel"),t.scroll&&z(n,"scroll"),t.move&&z(n,"move"),t.pinch&&z(n,"pinch"),t.hover&&z(n,"hover")}var Ne=(n,t,e)=>(s,r,o,i={},a=!1)=>{var c,l;let u=(c=i.capture)!==null&&c!==void 0?c:t.capture,d=(l=i.passive)!==null&&l!==void 0?l:t.passive,v=a?s:Me(s,r,u);e&&d&&(v+="Passive"),n[v]=n[v]||[],n[v].push(o)},ys=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function vs(n){let t={},e={},s=new Set;for(let r in n)ys.test(r)?(s.add(RegExp.lastMatch),e[r]=n[r]):t[r]=n[r];return[e,t,s]}function V(n,t,e,s,r,o){if(!n.has(e)||!J.has(s))return;let i=e+"Start",a=e+"End",c=l=>{let u;return l.first&&i in t&&t[i](l),e in t&&(u=t[e](l)),l.last&&a in t&&t[a](l),u};r[s]=c,o[s]=o[s]||{}}function Be(n,t){let[e,s,r]=vs(n),o={};return V(r,e,"onDrag","drag",o,t),V(r,e,"onWheel","wheel",o,t),V(r,e,"onScroll","scroll",o,t),V(r,e,"onPinch","pinch",o,t),V(r,e,"onMove","move",o,t),V(r,e,"onHover","hover",o,t),{handlers:o,config:t,nativeHandlers:s}}function bs(n,t){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function xs(n){var t=bs(n,"string");return typeof t=="symbol"?t:String(t)}function _s(n,t,e){return t=xs(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Ue(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,s)}return e}function dt(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ue(Object(e),!0).forEach(function(s){_s(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ue(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}var Jt=class{constructor(t,e,s,r,o){this._target=t,this._gestureKey=r,this._ctrl=new pt(e),this._ctrl.applyHandlers(e,o),this._ctrl.applyConfig(dt(dt({},s),{},{target:t}),r),this._ctrl.effect()}destroy(){this._ctrl.clean()}setConfig(t){this._ctrl.clean(),this._ctrl.applyConfig(dt(dt({},t),{},{target:this._target}),this._gestureKey),this._ctrl.effect()}};function ws(n){return n.forEach(Gt),function(t,e,s){let{handlers:r,nativeHandlers:o,config:i}=Be(e,s||{});return new Jt(t,r,i,void 0,o)}}var ze=function(t,e,s){return ws([Kt,Wt,Zt,Xt,$t,Yt])(t,e,s||{})};function gt(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(e[s[r]]=n[s[r]]);return e}var yt=function(){},F=function(){};var tt=(n,t,e)=>Math.min(Math.max(e,n),t);var Qt=.001,Ts=.01,Ve=10,Os=.05,Ss=1;function Fe({duration:n=800,bounce:t=.25,velocity:e=0,mass:s=1}){let r,o;yt(n<=Ve*1e3,"Spring duration must be 10 seconds or less");let i=1-t;i=tt(Os,Ss,i),n=tt(Ts,Ve,n/1e3),i<1?(r=l=>{let u=l*i,d=u*n,v=u-e,y=vt(l,i),f=Math.exp(-d);return Qt-v/y*f},o=l=>{let d=l*i*n,v=d*e+e,y=Math.pow(i,2)*Math.pow(l,2)*n,f=Math.exp(-d),h=vt(Math.pow(l,2),i);return(-r(l)+Qt>0?-1:1)*((v-y)*f)/h}):(r=l=>{let u=Math.exp(-l*n),d=(l-e)*n+1;return-Qt+u*d},o=l=>{let u=Math.exp(-l*n),d=(e-l)*(n*n);return u*d});let a=5/n,c=Ms(r,o,a);if(n=n*1e3,isNaN(c))return{stiffness:100,damping:10,duration:n};{let l=Math.pow(c,2)*s;return{stiffness:l,damping:i*2*Math.sqrt(s*l),duration:n}}}var Es=12;function Ms(n,t,e){let s=e;for(let r=1;r<Es;r++)s=s-n(s)/t(s);return s}function vt(n,t){return n*Math.sqrt(1-t*t)}var Is=["duration","bounce"],ks=["stiffness","damping","mass"];function He(n,t){return t.some(e=>n[e]!==void 0)}function Ds(n){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},n);if(!He(n,ks)&&He(n,Is)){let e=Fe(n);t=Object.assign(Object.assign(Object.assign({},t),e),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}function bt(n){var{from:t=0,to:e=1,restSpeed:s=2,restDelta:r}=n,o=gt(n,["from","to","restSpeed","restDelta"]);let i={done:!1,value:t},{stiffness:a,damping:c,mass:l,velocity:u,duration:d,isResolvedFromDuration:v}=Ds(o),y=Ge,f=Ge;function h(){let g=u?-(u/1e3):0,b=e-t,m=c/(2*Math.sqrt(a*l)),p=Math.sqrt(a/l)/1e3;if(r===void 0&&(r=Math.min(Math.abs(e-t)/100,.4)),m<1){let x=vt(p,m);y=_=>{let O=Math.exp(-m*p*_);return e-O*((g+m*p*b)/x*Math.sin(x*_)+b*Math.cos(x*_))},f=_=>{let O=Math.exp(-m*p*_);return m*p*O*(Math.sin(x*_)*(g+m*p*b)/x+b*Math.cos(x*_))-O*(Math.cos(x*_)*(g+m*p*b)-x*b*Math.sin(x*_))}}else if(m===1)y=x=>e-Math.exp(-p*x)*(b+(g+p*b)*x);else{let x=p*Math.sqrt(m*m-1);y=_=>{let O=Math.exp(-m*p*_),I=Math.min(x*_,300);return e-O*((g+m*p*b)*Math.sinh(I)+x*b*Math.cosh(I))/x}}}return h(),{next:g=>{let b=y(g);if(v)i.done=g>=d;else{let m=f(g)*1e3,p=Math.abs(m)<=s,x=Math.abs(e-b)<=r;i.done=p&&x}return i.value=i.done?e:b,i},flipTarget:()=>{u=-u,[t,e]=[e,t],h()}}}bt.needsInterpolation=(n,t)=>typeof n=="string"||typeof t=="string";var Ge=n=>0;var te=(n,t,e)=>{let s=t-n;return s===0?1:(e-n)/s};var H=(n,t,e)=>-e*n+e*t+n;var xt=(n,t)=>e=>Math.max(Math.min(e,t),n),R=n=>n%1?Number(n.toFixed(5)):n,G=/(-)?([\d]*\.?[\d])+/g,_t=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Ke=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function P(n){return typeof n=="string"}var K={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},wt=Object.assign(Object.assign({},K),{transform:xt(0,1)}),jr=Object.assign(Object.assign({},K),{default:1});var et=n=>({test:t=>P(t)&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Ur=et("deg"),Y=et("%"),zr=et("px"),Vr=et("vh"),Fr=et("vw"),Hr=Object.assign(Object.assign({},Y),{parse:n=>Y.parse(n)/100,transform:n=>Y.transform(n*100)});var $=(n,t)=>e=>Boolean(P(e)&&Ke.test(e)&&e.startsWith(n)||t&&Object.prototype.hasOwnProperty.call(e,t)),Tt=(n,t,e)=>s=>{if(!P(s))return s;let[r,o,i,a]=s.match(G);return{[n]:parseFloat(r),[t]:parseFloat(o),[e]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}};var k={test:$("hsl","hue"),parse:Tt("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:s=1})=>"hsla("+Math.round(n)+", "+Y.transform(R(t))+", "+Y.transform(R(e))+", "+R(wt.transform(s))+")"};var Ps=xt(0,255),Ot=Object.assign(Object.assign({},K),{transform:n=>Math.round(Ps(n))}),M={test:$("rgb","red"),parse:Tt("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:s=1})=>"rgba("+Ot.transform(n)+", "+Ot.transform(t)+", "+Ot.transform(e)+", "+R(wt.transform(s))+")"};function As(n){let t="",e="",s="",r="";return n.length>5?(t=n.substr(1,2),e=n.substr(3,2),s=n.substr(5,2),r=n.substr(7,2)):(t=n.substr(1,1),e=n.substr(2,1),s=n.substr(3,1),r=n.substr(4,1),t+=t,e+=e,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}var W={test:$("#"),parse:As,transform:M.transform};var j={test:n=>M.test(n)||W.test(n)||k.test(n),parse:n=>M.test(n)?M.parse(n):k.test(n)?k.parse(n):W.parse(n),transform:n=>P(n)?n:n.hasOwnProperty("red")?M.transform(n):k.transform(n)};var Ye="${c}",$e="${n}";function Cs(n){var t,e,s,r;return isNaN(n)&&P(n)&&((e=(t=n.match(G))===null||t===void 0?void 0:t.length)!==null&&e!==void 0?e:0)+((r=(s=n.match(_t))===null||s===void 0?void 0:s.length)!==null&&r!==void 0?r:0)>0}function We(n){typeof n=="number"&&(n=`${n}`);let t=[],e=0,s=n.match(_t);s&&(e=s.length,n=n.replace(_t,Ye),t.push(...s.map(j.parse)));let r=n.match(G);return r&&(n=n.replace(G,$e),t.push(...r.map(K.parse))),{values:t,numColors:e,tokenised:n}}function Ze(n){return We(n).values}function Xe(n){let{values:t,numColors:e,tokenised:s}=We(n),r=t.length;return o=>{let i=s;for(let a=0;a<r;a++)i=i.replace(a<e?Ye:$e,a<e?j.transform(o[a]):R(o[a]));return i}}var Ls=n=>typeof n=="number"?0:n;function Rs(n){let t=Ze(n);return Xe(n)(t.map(Ls))}var St={test:Cs,parse:Ze,createTransformer:Xe,getAnimatableNone:Rs};function ee(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function ne({hue:n,saturation:t,lightness:e,alpha:s}){n/=360,t/=100,e/=100;let r=0,o=0,i=0;if(!t)r=o=i=e;else{let a=e<.5?e*(1+t):e+t-e*t,c=2*e-a;r=ee(c,a,n+1/3),o=ee(c,a,n),i=ee(c,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:s}}var js=(n,t,e)=>{let s=n*n,r=t*t;return Math.sqrt(Math.max(0,e*(r-s)+s))},Ns=[W,M,k],qe=n=>Ns.find(t=>t.test(n)),Je=n=>`'${n}' is not an animatable color. Use the equivalent color code instead.`,Et=(n,t)=>{let e=qe(n),s=qe(t);F(!!e,Je(n)),F(!!s,Je(t));let r=e.parse(n),o=s.parse(t);e===k&&(r=ne(r),e=M),s===k&&(o=ne(o),s=M);let i=Object.assign({},r);return a=>{for(let c in i)c!=="alpha"&&(i[c]=js(r[c],o[c],a));return i.alpha=H(r.alpha,o.alpha,a),e.transform(i)}};var Qe=n=>typeof n=="number";var Bs=(n,t)=>e=>t(n(e)),Mt=(...n)=>n.reduce(Bs);function en(n,t){return Qe(n)?e=>H(n,t,e):j.test(n)?Et(n,t):re(n,t)}var se=(n,t)=>{let e=[...n],s=e.length,r=n.map((o,i)=>en(o,t[i]));return o=>{for(let i=0;i<s;i++)e[i]=r[i](o);return e}},nn=(n,t)=>{let e=Object.assign(Object.assign({},n),t),s={};for(let r in e)n[r]!==void 0&&t[r]!==void 0&&(s[r]=en(n[r],t[r]));return r=>{for(let o in s)e[o]=s[o](r);return e}};function tn(n){let t=St.parse(n),e=t.length,s=0,r=0,o=0;for(let i=0;i<e;i++)s||typeof t[i]=="number"?s++:t[i].hue!==void 0?o++:r++;return{parsed:t,numNumbers:s,numRGB:r,numHSL:o}}var re=(n,t)=>{let e=St.createTransformer(t),s=tn(n),r=tn(t);return s.numHSL===r.numHSL&&s.numRGB===r.numRGB&&s.numNumbers>=r.numNumbers?Mt(se(s.parsed,r.parsed),e):(yt(!0,`Complex values '${n}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),i=>`${i>0?t:n}`)};var Us=(n,t)=>e=>H(n,t,e);function zs(n){if(typeof n=="number")return Us;if(typeof n=="string")return j.test(n)?Et:re;if(Array.isArray(n))return se;if(typeof n=="object")return nn}function Vs(n,t,e){let s=[],r=e||zs(n[0]),o=n.length-1;for(let i=0;i<o;i++){let a=r(n[i],n[i+1]);if(t){let c=Array.isArray(t)?t[i]:t;a=Mt(c,a)}s.push(a)}return s}function Fs([n,t],[e]){return s=>e(te(n,t,s))}function Hs(n,t){let e=n.length,s=e-1;return r=>{let o=0,i=!1;if(r<=n[0]?i=!0:r>=n[s]&&(o=s-1,i=!0),!i){let c=1;for(;c<e&&!(n[c]>r||c===s);c++);o=c-1}let a=te(n[o],n[o+1],r);return t[o](a)}}function It(n,t,{clamp:e=!0,ease:s,mixer:r}={}){let o=n.length;F(o===t.length,"Both input and output ranges must be the same length"),F(!s||!Array.isArray(s)||s.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),n[0]>n[o-1]&&(n=[].concat(n),t=[].concat(t),n.reverse(),t.reverse());let i=Vs(t,s,r),a=o===2?Fs(n,i):Hs(n,i);return e?c=>a(tt(n[0],n[o-1],c)):a}var nt=n=>t=>1-n(1-t),kt=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,sn=n=>t=>Math.pow(t,n),oe=n=>t=>t*t*((n+1)*t-n),rn=n=>{let t=oe(n);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))};var on=1.525,Gs=4/11,Ks=8/11,Ys=9/10;var an=sn(2),$o=nt(an),cn=kt(an),$s=n=>1-Math.sin(Math.acos(n)),Ws=nt($s),Wo=kt(Ws),ln=oe(on),Zo=nt(ln),Xo=kt(ln),qo=rn(on),Zs=4356/361,Xs=35442/1805,qs=16061/1805,Js=n=>{if(n===1||n===0)return n;let t=n*n;return n<Gs?7.5625*t:n<Ks?9.075*t-9.9*n+3.4:n<Ys?Zs*t-Xs*n+qs:10.8*n*n-20.52*n+10.72},Jo=nt(Js);function Qs(n,t){return n.map(()=>t||cn).splice(0,n.length-1)}function tr(n){let t=n.length;return n.map((e,s)=>s!==0?s/(t-1):0)}function er(n,t){return n.map(e=>e*t)}function st({from:n=0,to:t=1,ease:e,offset:s,duration:r=300}){let o={done:!1,value:n},i=Array.isArray(t)?t:[n,t],a=er(s&&s.length===i.length?s:tr(i),r);function c(){return It(a,i,{ease:Array.isArray(e)?e:Qs(i,e)})}let l=c();return{next:u=>(o.value=l(u),o.done=u>=r,o),flipTarget:()=>{i.reverse(),l=c()}}}function un({velocity:n=0,from:t=0,power:e=.8,timeConstant:s=350,restDelta:r=.5,modifyTarget:o}){let i={done:!1,value:t},a=e*n,c=t+a,l=o===void 0?c:o(c);return l!==c&&(a=l-t),{next:u=>{let d=-a*Math.exp(-u/s);return i.done=!(d>r||d<-r),i.value=i.done?l:l+d,i},flipTarget:()=>{}}}var fn={keyframes:st,spring:bt,decay:un};function hn(n){if(Array.isArray(n.to))return st;if(fn[n.type])return fn[n.type];let t=new Set(Object.keys(n));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?st:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?bt:st}var ie=16.666666666666668,nr=typeof performance<"u"?()=>performance.now():()=>Date.now(),ae=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(nr()),ie);function mn(n){let t=[],e=[],s=0,r=!1,o=!1,i=new WeakSet,a={schedule:(c,l=!1,u=!1)=>{let d=u&&r,v=d?t:e;return l&&i.add(c),v.indexOf(c)===-1&&(v.push(c),d&&r&&(s=t.length)),c},cancel:c=>{let l=e.indexOf(c);l!==-1&&e.splice(l,1),i.delete(c)},process:c=>{if(r){o=!0;return}if(r=!0,[t,e]=[e,t],e.length=0,s=t.length,s)for(let l=0;l<s;l++){let u=t[l];u(c),i.has(u)&&(a.schedule(u),n())}r=!1,o&&(o=!1,a.process(c))}};return a}var sr=40,ce=!0,rt=!1,le=!1,Z={delta:0,timestamp:0},ot=["read","update","preRender","render","postRender"],Dt=ot.reduce((n,t)=>(n[t]=mn(()=>rt=!0),n),{}),rr=ot.reduce((n,t)=>{let e=Dt[t];return n[t]=(s,r=!1,o=!1)=>(rt||ir(),e.schedule(s,r,o)),n},{}),pn=ot.reduce((n,t)=>(n[t]=Dt[t].cancel,n),{}),hi=ot.reduce((n,t)=>(n[t]=()=>Dt[t].process(Z),n),{}),or=n=>Dt[n].process(Z),dn=n=>{rt=!1,Z.delta=ce?ie:Math.max(Math.min(n-Z.timestamp,sr),1),Z.timestamp=n,le=!0,ot.forEach(or),le=!1,rt&&(ce=!1,ae(dn))},ir=()=>{rt=!0,ce=!0,le||ae(dn)},gn=()=>Z,yn=rr;function ue(n,t,e=0){return n-t-e}function vn(n,t,e=0,s=!0){return s?ue(t+-n,t,e):t-(n-t)+e}function bn(n,t,e,s){return s?n>=t+e:n<=-e}var ar=n=>{let t=({delta:e})=>n(e);return{start:()=>yn.update(t,!0),stop:()=>pn.update(t)}};function xn(n){var t,e,{from:s,autoplay:r=!0,driver:o=ar,elapsed:i=0,repeat:a=0,repeatType:c="loop",repeatDelay:l=0,onPlay:u,onStop:d,onComplete:v,onRepeat:y,onUpdate:f}=n,h=gt(n,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:g}=h,b,m=0,p=h.duration,x,_=!1,O=!0,I,lt=hn(h);!((e=(t=lt).needsInterpolation)===null||e===void 0)&&e.call(t,s,g)&&(I=It([0,100],[s,g],{clamp:!1}),s=0,g=100);let L=lt(Object.assign(Object.assign({},h),{from:s,to:g}));function Mn(){m++,c==="reverse"?(O=m%2===0,i=vn(i,p,l,O)):(i=ue(i,p,l),c==="mirror"&&L.flipTarget()),_=!1,y&&y()}function In(){b.stop(),v&&v()}function kn(Rt){if(O||(Rt=-Rt),i+=Rt,!_){let he=L.next(Math.max(0,i));x=he.value,I&&(x=I(x)),_=O?he.done:i<=0}f?.(x),_&&(m===0&&(p??(p=i)),m<a?bn(i,p,l,O)&&Mn():In())}function Dn(){u?.(),b=o(kn),b.start()}return r&&Dn(),{stop:()=>{d?.(),b.stop()}}}function _n(n,t){return t?n*(1e3/t):0}function A({from:n=0,velocity:t=0,min:e,max:s,power:r=.8,timeConstant:o=750,bounceStiffness:i=500,bounceDamping:a=10,restDelta:c=1,modifyTarget:l,driver:u,onUpdate:d,onComplete:v,onStop:y}){let f;function h(p){return e!==void 0&&p<e||s!==void 0&&p>s}function g(p){return e===void 0?s:s===void 0||Math.abs(e-p)<Math.abs(s-p)?e:s}function b(p){f?.stop(),f=xn(Object.assign(Object.assign({},p),{driver:u,onUpdate:x=>{var _;d?.(x),(_=p.onUpdate)===null||_===void 0||_.call(p,x)},onComplete:v,onStop:y}))}function m(p){b(Object.assign({type:"spring",stiffness:i,damping:a,restDelta:c},p))}if(h(n))m({from:n,velocity:t,to:g(n)});else{let p=r*t+n;typeof l<"u"&&(p=l(p));let x=g(p),_=x===e?-1:1,O,I,lt=L=>{O=I,I=L,t=_n(L-O,gn().delta),(_===1&&L>x||_===-1&&L<x)&&m({from:L,to:x,velocity:t})};b({type:"decay",from:n,velocity:t,timeConstant:o,power:r,restDelta:c,modifyTarget:l,onUpdate:h(p)?lt:void 0})}return{stop:()=>f?.stop()}}var it=class{count=0;length=0;data=[];constructor(t=3){this.length=t}add(t){this.data[this.count%this.length]=t,this.count+=1}clear(){this.data=Array(length)}get value(){let t=this.data.filter(e=>e!=null);return t.length==0?0:t.reduce((e,s)=>e+s,0)/t.length}},Pt=class{map;initialScale=0;lastPinchTime=0;lastWheelTime=0;lastClickTime=0;lastDragTime=0;scaleAnimation=A({});offsetAnimation=[A({}),A({})];velocity=[new it,new it];velocityScale=new it;constructor(t){this.map=t,new ze(this.map.element,{onWheel:this.onWheel.bind(this),onPinchStart:()=>this.initialScale=this.map.scale,onPinch:this.onPinch.bind(this),onPinchEnd:this.onPinchEnd.bind(this),onDragStart:this.onDragStart.bind(this),onDrag:this.onDrag.bind(this),onDragEnd:this.onDragEnd.bind(this),onClick:this.onClick.bind(this)})}onWheel({direction:t,event:e,delta:s,timeStamp:r}){if(r==this.lastWheelTime)return;this.offsetAnimation[0]?.stop(),this.offsetAnimation[1]?.stop(),this.scaleAnimation?.stop(),this.lastWheelTime=r;let o=this.map.scale;this.scaleAnimation=A({velocity:Math.log2(1+Math.abs(s[1])/200)/2,power:2,timeConstant:50,restDelta:.001,onUpdate:i=>{let a=Math.log2(o)-t[1]*i;this.scaleTo(2**a,[e.x,e.y])}})}onPinch(t){let{origin:e,da:s,initial:r,touches:o,timeStamp:i}=t;if(o!=2)return;this.lastPinchTime=i;let a=s[0]/r[0]*this.initialScale;this.velocityScale.add(a-this.map.scale),this.scaleTo(a,e)}onPinchEnd({origin:t}){let s=this.velocityScale.value>0?-1:1;this.initialScale=this.map.scale;let r=Math.log10(1+Math.abs(this.velocityScale.value))*50;this.scaleAnimation?.stop(),this.scaleAnimation=A({velocity:r,timeConstant:50,restDelta:.001,onUpdate:o=>{let i=Math.log2(this.initialScale)-s*o;this.scaleTo(2**i,t)}})}onDragStart(){this.offsetAnimation[0]?.stop(),this.offsetAnimation[1]?.stop(),this.scaleAnimation?.stop(),this.velocity[0].clear(),this.velocity[1].clear()}onDrag(t){let{pinching:e,wheeling:s,timeStamp:r,velocity:o,delta:i}=t;e||s||r-this.lastPinchTime<200||(this.velocity[0].add(o[0]),this.velocity[1].add(o[1]),this.setOffset([this.map.offset[0]+i[0],this.map.offset[1]+i[1]]))}async onDragEnd(t){let{direction:e,timeStamp:s,distance:r}=t;if(s-this.lastPinchTime<200)return;let o=[...this.map.offset],i=[this.velocity[0].value,this.velocity[1].value],a=Math.sqrt(i[0]**2+i[1]**2);a!=0&&(this.offsetAnimation[0]=A({velocity:a,power:200,timeConstant:200,onUpdate:c=>{this.setOffset([o[0]+e[0]*c*(i[0]/a),o[1]+e[1]*c*(i[1]/a)])}})),(r[0]>2||r[1]>2)&&(this.lastDragTime=s)}onClick({event:t}){if(t.timeStamp==this.lastDragTime)return;let e=200;if(t.timeStamp-this.lastClickTime<e){let s=this.map.scale;this.scaleAnimation?.stop(),this.scaleAnimation=A({velocity:1,power:1,timeConstant:100,restDelta:.001,onUpdate:r=>{let o=Math.log2(s)+r;this.scaleTo(2**o,[t.x,t.y])}})}else setTimeout(()=>{t.timeStamp==this.lastClickTime&&this.onClickTilemap([t.x,t.y])},e);this.lastClickTime=t.timeStamp}onClickTilemap(t){let e=this.map.findMarker(t);if(e){e?.[0].options.onClick?.(e[1]),this.map.options.onClick?.({target:e[0],index:e[1]});return}this.map.options.onClick?.()}limitScale(t){let{minZoom:e,options:s}=this.map,r=Math.log2(t);return r=Math.max(Math.min(r,s.maxZoom),e),2**r}scaleTo(t,e){let{offset:s,scale:r}=this.map;t=this.limitScale(t);let o=(t-r)/r;this.map.scale=t,this.setOffset([s[0]-(e[0]-s[0])*o,s[1]-(e[1]-s[1])*o])}setOffset(t){let{size:e,options:s,offset:r,scale:o}=this.map,i=[e[0]-s.size[0]*o,e[1]-s.size[1]*o];r[0]=Math.min(Math.max(t[0],i[0]),0),r[1]=Math.min(Math.max(t[1],i[1]),0),this.map.draw()}};var D=class{},At=class{element;canvas;canvas2d;options;offset=[0,0];scale=0;minZoom=0;size=[0,0];tileLayers=new Set;markerLayers=new Set;domLayers=new Set;imageLayers=new Set;gesture;lastDrawTime=0;constructor(t){this.options={...t,tileOffset:t.tileOffset??[0,0],maxZoom:t.maxZoom??0},typeof t.element=="string"?this.element=document.querySelector(t.element):this.element=t.element,this.element.style.touchAction="none",this.canvas=document.createElement("canvas"),this.element.appendChild(this.canvas),this.canvas2d=this.canvas.getContext("2d"),this.gesture=new Pt(this),new ResizeObserver(([s])=>{let{width:r,height:o}=s.contentRect;setTimeout(()=>this.resize(r,o),0)}).observe(this.element),this.element.addEventListener("mousemove",({clientX:s,clientY:r})=>{let o=this.findMarker([s,r]);if(o){o?.[0].options.onMouseMove?.(o[1]),this.options.onMouseMove?.({target:o[0],index:o[1]});return}this.options.onMouseMove?.()}),this.domLayers.clear=new Proxy(this.domLayers.clear,{apply:(s,r)=>{for(let o of r.values())this.element.removeChild(o.element);return s.apply(r)}}),this.domLayers.delete=new Proxy(this.domLayers.delete,{apply:(s,r,o)=>(this.element.removeChild(o[0].element),s.apply(r,o))})}findMarker(t){let e=Array.from(this.markerLayers).reverse();for(let s of e.filter(r=>r.options.clickable)){let{image:r,items:o,anchor:i}=s.options,a=[r.width,r.height];a[0]/=devicePixelRatio,a[1]/=devicePixelRatio;for(let c=o.length-1;c>=0;c-=1){let[l,u]=this.toCanvasPositionWithOffset([o[c].x,o[c].y]),d=[a[0]*i[0],a[1]*i[1]];if(t[0]>l-d[0]&&t[0]<l+(a[0]-d[0])&&t[1]>u-d[1]&&t[1]<u+(a[0]-d[0]))return[s,c]}}}toCanvasPositionWithOffset(t){let{offset:e}=this,[s,r]=this.toCanvasPosition(t);return[s+e[0],r+e[1]]}toCanvasPosition([t,e]){let[s,r]=this.mapPointOffset;return[(t+s)*this.scale,(e+r)*this.scale]}overlaps(t,e){return t[0]+e[0]>-this.offset[0]&&t[0]<this.size[0]-this.offset[0]&&t[1]+e[1]>-this.offset[1]&&t[1]<this.size[1]-this.offset[1]}get mapPointOffset(){let{origin:t,tileOffset:e}=this.options;return[t[0]-e[0],t[1]-e[1]]}resize(t,e){this.canvas.width=t*devicePixelRatio,this.canvas.height=e*devicePixelRatio,this.canvas.style.width=`${t}px`,this.canvas.style.height=`${e}px`,this.size=[t,e];let s=Math.max(this.size[0]/this.options.size[0],this.size[1]/this.options.size[1]),r=Math.log2(s);this.scale?this.minZoom!=r?(this.minZoom=r,this.gesture.scaleTo(this.scale,[this.size[0]/2,this.size[1]/2])):this.draw():(this.minZoom=r,this.scale=this.gesture.limitScale(s),this.draw())}draw(){let t=Date.now();t!=this.lastDrawTime&&(requestAnimationFrame(()=>{let{canvas2d:e,canvas:s,offset:r}=this;e.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),e.clearRect(0,0,s.width,s.height),e.translate(r[0],r[1]);for(let o of this.tileLayers)o.draw();for(let o of this.imageLayers)o.draw();for(let o of this.markerLayers)o.draw();for(let o of this.domLayers)o.draw()}),this.lastDrawTime=t)}};function C(n){return Math.ceil(parseFloat(n.toFixed(3)))}var Ct=class extends D{map;options;tiles={};images={};constructor(t,e){super(),this.map=t,this.options={...e,tileSize:e.tileSize??256};let{size:s,tileOffset:r}=t.options,{minZoom:o,maxZoom:i,tileSize:a}=this.options;for(let c=o;c<=i;c+=1){let l=a*2**(i-c),u=C(s[1]/l),d=C(s[0]/l),v=[Math.floor(r[0]/l),Math.floor(r[1]/l)],y=[];for(let f=0;f<u;f+=1){y[f]=[];for(let h=0;h<d;h+=1){let g=e.getTileUrl(h+v[0],f+v[1],c);y[f][h]=g}}this.tiles[c]=y}for(let c of this.tiles[o])for(let l of c){let u=new Image;u.crossOrigin="anonymous",u.src=l,u.addEventListener("load",()=>{this.images[l]=u,this.map.draw()})}}draw(){let{minZoom:t,maxZoom:e}=this.options;this.drawTiles(t);let s=e+Math.log2(this.map.scale);s=C(Math.min(Math.max(s,t),e)),s>t&&this.drawTiles(s)}drawTiles(t){let e=this.tiles[t],{scale:s,offset:r,size:o,options:i}=this.map,a=this.options.tileSize*2**(this.options.maxZoom-t),c=a*s,l=i.size[0]%a*s,u=Math.floor(-r[0]/c),d=C((o[0]-r[0]+l)/c),v=Math.floor(-r[1]/c),y=C((o[1]-r[1])/c);for(let f=v;f<y;f+=1)for(let h=u;h<d;h+=1){let g=e[f][h],b=this.images[e[f][h]];if(b)this.map.canvas2d.drawImage(b,c*h-l,c*f,c,c);else{let m=new Image;m.crossOrigin="anonymous",m.src=g,m.addEventListener("load",()=>{this.images[g]=m})}}}};var at=class extends D{map;options;constructor(t,e){super(),this.map=t,this.options={...e,anchor:e.anchor??[.5,1],clickable:e.clickable??!0}}draw(){let{items:t,image:e,anchor:s}=this.options,{canvas2d:r}=this.map,o=[e.width,e.height];o[0]/=devicePixelRatio,o[1]/=devicePixelRatio;for(let i of t){let[a,c]=this.map.toCanvasPosition([i.x,i.y]);a-=o[0]*s[0],c-=o[1]*s[1],this.map.overlaps([a,c],o)&&r.drawImage(e,a,c,o[0],o[1])}}};var Lt=class extends D{map;options;element;constructor(t,e){super(),this.map=t,this.options=e,this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.top="0",this.element.style.left="0",this.element.appendChild(e.element),this.element.addEventListener("click",r=>{r.target!=this.element&&r.stopPropagation()}),this.map.element.appendChild(this.element),this.draw(),new ResizeObserver(([r])=>{let{blockSize:o,inlineSize:i}=r.borderBoxSize[0];this.element.style.width=`${i}px`,this.element.style.height=`${o}px`}).observe(e.element)}draw(){let[t,e]=this.map.toCanvasPositionWithOffset(this.options.position);this.element.style.transform=`translate(${t}px, ${e}px)`}};var ct=class extends D{map;options;images={};minZoom=0;constructor(t,e){super(),this.map=t,this.options=e,this.init()}async init(){this.minZoom=C(this.map.minZoom);let t=this.options.image;for(let e=0;e>=this.minZoom;e-=1)t=this.downscaleImage(t),this.images[e]=t}downscaleImage(t){let e=document.createElement("canvas"),s=e.getContext("2d");return e.width=t.width/2,e.height=t.height/2,e.width==0||e.height==0?t:(s.drawImage(t,0,0,e.width,e.height),e)}draw(){let{canvas2d:t,scale:e}=this.map,s=C(Math.log2(e));s=Math.max(Math.min(s,0),this.minZoom);let r=this.images[s]??this.options.image,{bounds:o}=this.options,[i,a]=this.map.mapPointOffset,c=(i+o[0][0])*e,l=(a+o[0][1])*e,u=(i+o[1][0])*e,d=(a+o[1][1])*e,v=[u-c,d-l];this.map.overlaps([c,l],v)&&t.drawImage(r,c,l,v[0],v[1])}};var wn="";async function fe(n,t={}){return(await(await fetch(`https://cloud.yuanshen.site/api/${n}`,{method:"post",body:JSON.stringify(t),headers:{"content-type":"application/json",authorization:`Bearer ${wn}`}})).json()).data}async function Tn(){wn=(await(await fetch("https://cloud.yuanshen.site/oauth/token?scope=all&grant_type=client_credentials",{method:"post",headers:{authorization:"Basic Y2xpZW50OnNlY3JldA=="}})).json()).access_token}var On=[["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE1",{imageUrl:"https://assets.yuanshen.site/overlay/YL/1.png",imageBounds:[[-6299+1427,-2190+1353],[-6299+1427+404,-2190+1353+504]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE2",{imageUrl:"https://assets.yuanshen.site/overlay/YL/2.png",imageBounds:[[-6299+1299,-2190+2040],[-6299+1299+648,-2190+2040+570]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE3",{imageUrl:"https://assets.yuanshen.site/overlay/YL/3.png",imageBounds:[[-6299+2199,-2190+1671],[-6299+2199+398,-2190+1671+306]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE4",{imageUrl:"https://assets.yuanshen.site/overlay/YL/4.png",imageBounds:[[-6299+2177,-2190+2168],[-6299+2177+570,-2190+2168+515]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE5",{imageUrl:"https://assets.yuanshen.site/overlay/YL/5.png",imageBounds:[[-6299+2734,-2190+937],[-6299+2734+433,-2190+937+660]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE6",{imageUrl:"https://assets.yuanshen.site/overlay/YL/6.png",imageBounds:[[-6299+3323,-2190+507],[-6299+3323+443,-2190+507+377]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE7",{imageUrl:"https://assets.yuanshen.site/overlay/YL/7.png",imageBounds:[[-6299+3426,-2190+924],[-6299+3426+278,-2190+924+360]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE8",{imageUrl:"https://assets.yuanshen.site/overlay/YL/8.png",imageBounds:[[-6299+3796,-2190+1024],[-6299+3796+344,-2190+1024+393]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE9",{imageUrl:"https://assets.yuanshen.site/overlay/YL/9.png",imageBounds:[[-6299+3563,-2190+1604],[-6299+3563+443,-2190+1604+799]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE10",{imageUrl:"https://assets.yuanshen.site/overlay/YL/10.png",imageBounds:[[-6299+3787,-2190+2710],[-6299+3787+378,-2190+2710+560]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE11",{imageUrl:"https://assets.yuanshen.site/overlay/YL/11.png",imageBounds:[[-6299+3086,-2190+3297],[-6299+3086+521,-2190+3297+433]]}],["\u8BF8\u6CD5\u4E1B\u6797-\u5E95\u56FE12",{imageUrl:"https://assets.yuanshen.site/overlay/YL/12.png",imageBounds:[[-6299+1887,-2190+3637],[-6299+1887+740,-2190+3637+346]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE1",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE1.png",imageBounds:[[-7664+142,540+1183],[-7664+142+1119,540+1183+1351]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE2",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE2.png",imageBounds:[[-7664+756,540+2256],[-7664+756+372,540+2256+105]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE3",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE3.png",imageBounds:[[-7664+2062,540+303],[-7664+2062+152,540+303+132]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE4",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE4.png",imageBounds:[[-7664+2072,540+796],[-7664+2072+160,540+796+178]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE5",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE5.png",imageBounds:[[-7664+1948,540+1483],[-7664+1948+293,540+1483+465]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE6",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE6.png",imageBounds:[[-7664+2254,540+1370],[-7664+2254+332,540+1370+271]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE7",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE7.png",imageBounds:[[-7664+2708,540+1656],[-7664+2708+398,540+1656+365]]}],["\u5927\u8D64\u6C99\u6D77-\u5E95\u56FE8",{imageUrl:"https://assets.yuanshen.site/overlay/SM/\u56FA\u5B9A\u5E95\u56FE8.png",imageBounds:[[-7664+1608,540+2316],[-7664+1608+985,540+2316+693]]}]],Sn=[["\u79D8\u4EEA1",[[-7664+1108,540+1682],[-7664+1108+460,540+1682+259]]],["\u79D8\u4EEA2",[[-7664+1129,540+1589],[-7664+1129+279,540+1589+325]]],["\u79D8\u4EEA3",[[-7664+1149,540+1629],[-7664+1149+305,540+1629+259]]],["\u738B\u96751",[[-7664+729,540+1729],[-7664+729+124,540+1729+85]]],["\u738B\u96752",[[-7664+696,540+1642],[-7664+696+372,540+1642+246]]],["\u738B\u96753",[[-7664+721,540+1702],[-7664+721+187,540+1702+166]]],["\u820D\u8EAB1",[[-7664+2250,540+1489],[-7664+2250+356,540+1489+432]]],["\u820D\u8EAB2",[[-7664+2152,540+1596],[-7664+2152+312,540+1596+398]]],["\u820D\u8EAB3",[[-7664+2276,540+1649],[-7664+2276+324,540+1649+332]]],["\u5723\u663E1",[[-7664+1834,540+509],[-7664+1834+567,540+509+212]]],["\u5723\u663E2",[[-7664+1809,540+502],[-7664+1809+592,540+502+226]]],["\u5723\u663E3",[[-7664+1822,540+509],[-7664+1822+579,540+509+219]]]],En=[["\u8D64\u738B\u7684\u6C34\u6676\u676F",[[-7043,-284],[-7043+769,-284+902]]],["\u6C38\u6052\u7EFF\u6D32",[[-6793,-125],[-6793+698,-125+689]]],["\u9163\u4E50\u4E4B\u6BBF4",[[-6904,-494],[-6904+285,-494+279]]],["\u9163\u4E50\u4E4B\u6BBF3",[[-6997,-496],[-6997+347,-496+178]]],["\u9163\u4E50\u4E4B\u6BBF2",[[-6882,-548],[-6882+505,-548+514]]],["\u9163\u4E50\u4E4B\u6BBF1",[[-6972,-455],[-6972+270,-455+354]]],["\u5C45\u5C14\u57CE\u589F\xB7\u8D64\u738B\u795E\u6BBF3",[[-7317,1237],[-7317+581,1237+482]]],["\u5C45\u5C14\u57CE\u589F\xB7\u8D64\u738B\u795E\u6BBF2",[[-6886,1577],[-6886+130,1577+169]]],["\u5C45\u5C14\u57CE\u589F\xB7\u8D64\u738B\u795E\u6BBF1",[[-7341,1174],[-7341+583,1174+688]]],["\u541B\u738B\u4E4B\u6BBF3",[[-6368,145],[-6368+435,145+468]]],["\u541B\u738B\u4E4B\u6BBF2",[[-6089,139],[-6089+222,139+139]]],["\u541B\u738B\u4E4B\u6BBF1",[[-6310,138],[-6310+442,138+409]]],["\u6C99\u866B\u96A7\u90533",[[-5490,-25],[-5490+180,-25+290]]],["\u6C99\u866B\u96A7\u90532",[[-5517,-19],[-5517+275,-19+506]]],["\u6C99\u866B\u96A7\u90531",[[-5914,-61],[-5914+682,-61+814]]],["\u751F\u547D\u4E4B\u6BBF",[[-7612,2],[-7612+643,2+588]]],["\u4E94\u7EFF\u6D32",[[-6171,-730],[-6171+643,-730+390]]],["\u884C\u5BAB\u82B1\u56ED",[[-7219,-785],[-7219+507,-785+522]]],["\u9547\u7075\u76D1\u7262\u53CA\u5DE8\u4EBA\u5CE1\u8C37",[[-7186,502],[-7186+788,502+510]]]];async function cr(){let n=[17408,16384],t=[3568,6286],e=[-5120,0],s=new At({element:"#tilemap",size:n,tileOffset:e,origin:t,maxZoom:.5});s.tileLayers.add(new Ct(s,{minZoom:10,maxZoom:13,getTileUrl(y,f,h){return`https://assets.yuanshen.site/tiles_twt34/${h}/${y}_${f}.png`}})),await Tn();let{record:r}=await fe("icon/get/list",{size:1e3}),o=32*devicePixelRatio,i={};for(let y of r)i[y.name]=y.url;c(126),c(1242),c(1561),c(97),c(159);let a=new at(s,{items:[],image:new Image});s.options.onClick=y=>{if(y){let{target:f,index:h}=y;if(f==a)return;let{image:g,items:b}=f.options,m=b[h];s.markerLayers.add(a),a.options.items[0]=m,a.options.image=l(g);let p=document.createElement("div");p.className="marker",p.innerHTML=`
        <div class="marker-title">${m.data.markerTitle}</div>
        <div class="marker-content">${m.data.content}</div>
        ${m.data.picture?`<img src="${m.data.picture}">`:""}
      `,s.domLayers.clear(),s.domLayers.add(new Lt(s,{element:p,position:[m.x,m.y]})),s.draw()}else s.markerLayers.delete(a),s.domLayers.clear(),s.draw()};async function c(y){let f=await fe("marker/get/list_byinfo",{itemIdList:[y]}),h=new at(s,{items:f.map(g=>{let[b,m]=g.position.split(",").map(p=>parseInt(p));return{x:b,y:m,data:g}}),image:u(i[f[0].itemList[0].iconTag])});s.markerLayers.add(h)}function l(y){let f=document.createElement("canvas"),h=f.getContext("2d");return f.width=y.width,f.height=y.height,h.drawImage(y,0,0),f}function u(y){let f=document.createElement("canvas"),h=f.getContext("2d"),g=new Image;return g.crossOrigin="anonymous",g.src=y,g.addEventListener("load",()=>{f.width=o,f.height=o;let b=o/2;h.arc(b,b,b,0,2*Math.PI),h.fillStyle="rgba(255, 255, 255, 0.5)",h.fill();let m=[g.width*devicePixelRatio,g.height*devicePixelRatio];g.width>g.height?m=[o,m[1]*o/m[0]]:m=[m[0]*o/m[1],o];let p=(o-m[0])/2,x=(o-m[1])/2;h.drawImage(g,p,x,m[0],m[1]),s.draw()}),f}async function d(){await new Promise(h=>setTimeout(h,100));let y=document.createElement("canvas"),f=y.getContext("2d");f.fillStyle="rgba(0, 0, 0, 0.68)",f.rect(0,0,y.width,y.height),f.fill(),s.imageLayers.add(new ct(s,{image:y,bounds:[[-t[0]+e[0],-t[1]+e[1]],n]}));for(let[h,{imageUrl:g,imageBounds:b}]of On)v(g,b);for(let[h,g]of Sn)v(`https://assets.yuanshen.site/overlay/SM/${h}.png`,g);for(let[h,g]of En)v(`https://assets.yuanshen.site/overlay/${h}.png`,g)}function v(y,f){let h=new Image;h.crossOrigin="anonymous",h.src=y,h.addEventListener("load",()=>{s.imageLayers.add(new ct(s,{image:h,bounds:f})),s.draw()})}}cr();})();
